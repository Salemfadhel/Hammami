<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Charlie Coin (CHR)</title>
    <link rel="stylesheet" href="css/styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/web3/1.6.0/web3.min.js"></script>
    <script src="https://cdn.walletconnect.org/walletconnect-qrcode-modal/1.8.0/umd/index.min.js"></script>
    <style>
        button {
            padding: 10px 15px;
            background-color: #4CAF50; /* Green */
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
        }
        button:hover {
            background-color: #45a049;
        }
    </style>
</head>
<body>

<header>
    <h1>Charlie Coin (CHR)</h1>
    <p>Total Supply: 1,000,000,000 CHR</p>
    <p>Smart Contract: <strong>0x1ce6C9567Fa5E4C97a7DaAFF75EAE9A0F2994776</strong></p>
</header>

<div class="content">
    <h2>Buy Charlie Coin (CHR)</h2>
    <input type="text" id="amount" placeholder="Amount in ETH" />
    <button id="buyButton">Buy CHR</button>
    <button id="connectButton">Connect Wallet (MetaMask)</button>
    <button id="walletConnectButton">Connect Wallet (WalletConnect)</button>
    <div id="walletAddress"></div>
</div>

<script src="js/script.js"></script>

<script>
    const contractAddress = "0x1ce6C9567Fa5E4C97a7DaAFF75EAE9A0F2994776"; // Your smart contract address
    const abi = [ /* Add your smart contract ABI here */ ];

    let web3;
    let userAccount;

    async function connectWallet() {
        if (window.ethereum) {
            web3 = new Web3(window.ethereum);
            try {
                await window.ethereum.request({ method: 'eth_requestAccounts' });
                userAccount = (await web3.eth.getAccounts())[0];
                document.getElementById('walletAddress').innerText = `Connected: ${userAccount}`;
            } catch (error) {
                console.error("User denied account access");
            }
        } else {
            alert('Please install MetaMask!');
        }
    }

    async function connectWalletConnect() {
        const walletConnectProvider = new WalletConnectProvider.default({
            infuraId: "YOUR_INFURA_PROJECT_ID", // Replace with your Infura Project ID
        });

        await walletConnectProvider.enable();
        web3 = new Web3(walletConnectProvider);
        userAccount = (await web3.eth.getAccounts())[0];
        document.getElementById('walletAddress').innerText = `Connected: ${userAccount}`;
    }

    async function buyCHR() {
        const amount = document.getElementById('amount').value;
        if (!userAccount) {
            alert('Please connect your wallet first.');
            return;
        }
        const contract = new web3.eth.Contract(abi, contractAddress);

        try {
            await contract.methods.buy().send({ from: userAccount, value: web3.utils.toWei(amount, 'ether') });
            alert('Purchase successful!');
        } catch (error) {
            console.error(error);
            alert('Purchase failed!');
        }
    }

    document.getElementById('connectButton').onclick = connectWallet;
    document.getElementById('buyButton').onclick = buyCHR;
    document.getElementById('walletConnectButton').onclick = connectWalletConnect;
</script>

</body>
</html>
